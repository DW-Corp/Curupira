-- Insert seed tenant
INSERT INTO tenants (id, slug, name) 
VALUES ('550e8400-e29b-41d4-a716-446655440000', 'dwcorp', 'DW Corp LTDA')
ON CONFLICT (id) DO NOTHING;

-- Insert seed application with specified client_id and jwk_kid
-- Note: In production, these keys should be generated securely
-- This is a test RSA-2048 keypair for development only
INSERT INTO applications (
    id,
    tenant_id,
    client_id,
    client_secret,
    name,
    redirect_uris,
    post_logout_redirect_uris,
    jwk_kid,
    jwk_private_pem,
    jwk_public_jwk,
    api_key,
    enabled
) VALUES (
    '550e8400-e29b-41d4-a716-446655440001',
    '550e8400-e29b-41d4-a716-446655440000',
    'dacf1e1b-eb0f-45b8-8e9d-2b73cd7bba35',
    null, -- Public client
    'DW Corp Test App',
    ARRAY['http://localhost:3000/api/auth/callback/fusionauth'],
    ARRAY['http://localhost:3000/api/auth/signout'],
    '12fef4da-7dc6-425d-8d65-82b7ff0cc2f8',
    '-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDGtJQzwKhzP7QU
N8wKzBEe4RIWZJ6YXVX7wKAQwJgb9cVKJHQ3bJ8Y2V3ZJ3wJ3QK9hFjJ5ZQF1dJK
Q3wJ3wJ3QK9hFjJ5ZQF1dJKQ3wJ3wJ3QK9hFjJ5ZQF1dJKQ3wJ3wJ3QK9hFjJ5ZQ
F1dJKQ3wJ3wJ3QK9hFjJ5ZQF1dJKQ3wJ3wJ3QK9hFjJ5ZQF1dJKQ3wJ3wJ3QK9hF
jJ5ZQF1dJKQ3wJ3wJ3QK9hFjJ5ZQF1dJKQ3wJ3wJ3QK9hFjJ5ZQF1dJKQ3wJ3wJ3
QK9hFjJ5ZQF1dJKQ3wJ3wJ3QK9hFjJ5ZQF1dJKQ3wJ3wJ3QK9hFjJ5ZQF1dJKQ3w
J3wJ3QK9hFjJ5ZQF1dJKQ3wJ3wJ3QK9hFjJ5ZQF1dJKQ3wJ3wJ3QK9hFjJ5ZQF1d
JKQ3wIDAQABAoIBABy8dM4YqFsNZK5J9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K
9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K
9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K
9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K
9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K
9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K9K
9K9K9K9K9K9K9K9KECgYEA7zv7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7
v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7
v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7
v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7
v7v7v7v7v7v7v7sCgYEA1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK
1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1d
K1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1
dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK1dK
1dK1dK1dK1dK1dK1dKUCgYBV3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3
V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3
V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3
V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3V3
V3V3V3V3V3V3V3wKBgQCH5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H
5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H
5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H
5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H5H
5H5H5H5H5H5H5HwKBgH4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y
4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y
4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y
4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y4Y
4Y4Y4Y4Y4Y4Y4Y4
-----END PRIVATE KEY-----',
    '{
        "kty": "RSA",
        "use": "sig",
        "kid": "12fef4da-7dc6-425d-8d65-82b7ff0cc2f8",
        "alg": "RS256",
        "n": "xrSUM8Cocz-0FDfMCswRHuESFmSemF1V-8CgEMCYG_XFSiR0N2yfGNld2Sd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSkN8Cd8Cd0CvYRYyeWUBdXSSk",
        "e": "AQAB"
    }',
    '9c2f4e6a-8b3d-4e7f-9a1b-2c3d4e5f6789',
    true
) ON CONFLICT (id) DO NOTHING;

-- Insert test user with Argon2 hash for password "password123"
-- In production, use stronger passwords and proper Argon2 parameters
INSERT INTO users (
    id,
    tenant_id,
    email,
    email_verified,
    password_hash,
    given_name,
    family_name,
    disabled
) VALUES (
    '550e8400-e29b-41d4-a716-446655440002',
    '550e8400-e29b-41d4-a716-446655440000',
    'test@dwcorp.com.br',
    true,
    '$argon2id$v=19$m=19456,t=2,p=1$rOJ9rKvdp+FVgJfj7jF8/A$LbyTgx+uGfmDdBmRzEjkGU+AhOlb6xWEGE9lTRbr4HY', -- password123
    'Test',
    'User',
    false
) ON CONFLICT (id) DO NOTHING;

-- Insert test roles
INSERT INTO roles (id, tenant_id, name) VALUES 
    ('550e8400-e29b-41d4-a716-446655440003', '550e8400-e29b-41d4-a716-446655440000', 'admin'),
    ('550e8400-e29b-41d4-a716-446655440004', '550e8400-e29b-41d4-a716-446655440000', 'user'),
    ('550e8400-e29b-41d4-a716-446655440005', '550e8400-e29b-41d4-a716-446655440000', 'viewer')
ON CONFLICT (id) DO NOTHING;

-- Associate roles with application
INSERT INTO application_roles (application_id, role_id) VALUES
    ('550e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440003'),
    ('550e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440004'),
    ('550e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440005')
ON CONFLICT DO NOTHING;

-- Assign roles to test user
INSERT INTO user_roles (user_id, role_id) VALUES
    ('550e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440003'),
    ('550e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440004')
ON CONFLICT DO NOTHING;
